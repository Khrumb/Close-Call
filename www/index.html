<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, target-densitydpi=device-dpi" />
				<link rel="stylesheet" type="text/css" href="css/title.css" />
        <title>Close Call</title>
    </head>
    <body>

		  <div id="debug"></div>

      <div id="connections">
        <div class="navbar">
          <div class="header_container">
            <div class="col middle">
              <img id="navbar_header" src="assets/title.png">
            </div>
            <div class="col side">
              <img id="loading_spinner" class="icon" src="assets/refresh.png" onclick="npms.refreshList()"> 
            </div>
            <div class="col side">
              <img class="icon" src="assets/settings.png" onclick="settingsHandler.loadAppSettings()">
            </div>
          </div>
        </div>
        <div class="device_list">
          <p id="loadingInfo" class="list_title">Scanning for Devices...</p>
          <div id="paired_deviceList">
          </div>
          <div id="unpaired_deviceList">
          </div>

          
          <p class="list_title">Past Conversations</p>
          <div id="offline_deviceList">
          </div>  

        </div> 
      </div>

      <div id="messenger" style="display:none">
        <div class="navbar">
          <div class="header_container">
            <div class="col side">
             <img class="icon" src="assets/back.png" onclick="messenger.back()">
            </div>
            <div class="col middle">
             <p id="convo_partner" class="page_title">Partner Name</p>
            </div>
            <div class="col side">
              <img class="icon" src="assets/settings.png" onclick="settingsHandler.loadDeviceSettings()">

            </div>
          </div>
        </div>

        <div id="conversation_container">
          
        </div>

        <div class="input_container">
          <div class="col wide_middle">
            <div contenteditable="true" placeholder="Type a message" id="messenger_input"></div>
          </div>
          <div class="col side">
             <img id="messenger_send_button" src="assets/send.png" onclick="messenger.processMessage()">
          </div>
        </div>
      </div>

      <div id="app_settings" style="display:none">
        <div class="navbar">
          <div class="header_container">
            <div class="col side">
             <img class="icon" src="assets/back.png" onclick="settingsHandler.submitAppSettings()">
            </div>
            <div class="col middle">
             <p class="page_title">App Settings</p>
            </div>
            <div class="col side">
            </div>
          </div>
        </div>
          <div class="settings_container">
            <div class="setting">
              <br>
              <input type="name" id="device_name" class="setting_name" placeholder="Adapter Name" onblur="dataManager.setName()"></p>
              <p class="setting_description close">Tap to change your device's Bluetooth Adapter name.</p>
            </div>
            <div class="setting">
              <label class="switch">
                <input id="setting_onLoadDiscovery" type="checkbox">
                <div class="slider round"></div>
              </label>
              <p class="setting_name">On Load Discovery</p>
              <p class="setting_description">When the app loads it will automatically start scanning for local devices.</p>
            </div>

            <div class="setting">
              <label class="switch">
                <input id="setting_makeDiscoverable" type="checkbox">
                <div class="slider round"></div>
              </label>
              <p class="setting_name">Ask to Make Discoverable</p>
              <p class="setting_description">When scanning for devices, the app will ask to make your own device discoverable.</p>
            </div>
            <div class="setting" onclick="npms.makeDeviceDiscoverable()">
              <p class="setting_name">Make Discoverable</p>
              <p class="setting_description">Tap to make device discoverable for 5 minuites.</p>
            </div>
            <div id="dataClear" class="setting" onclick="dataManager.clearAllData()">
              <p class="alert">Clear All Data</p>
            </div>
          </div>
      </div>


      <div id="device_settings" style="display:none">
        <div class="navbar">
          <div class="header_container">
            <div class="col side">
             <img class="icon" src="assets/back.png" onclick="settingsHandler.submitDeviceSettings()">
            </div>
            <div class="col middle">
             <p class="page_title">Partner Settings</p>
            </div>
            <div class="col side">
            </div>
          </div>
        </div>
        <div class="settings_container">        
          <div class="setting">
            <label class="switch">
              <input id="setting_mute" type="checkbox">
              <div class="slider round"></div>
            </label>
            <p class="setting_name">Mute</p>
            <p class="setting_description">No push notifications when you recieve a message from this user.</p>
          </div>
          <div class="setting">
            <label class="switch">
              <input id="setting_block" type="checkbox">
              <div class="slider round"></div>
            </label>
            <p class="setting_name">Block</p>
            <p class="setting_description">Blocks all communication with this user and they will no longer show up in the conversation list.<br> (Blocked user list can be found in App Settings)</p>
          </div>
        </div>
      </div>


		  <script type="text/javascript" src="cordova.js"></script>
      <script type="text/javascript" src="js/index.js"></script>
      <script type="text/javascript">
        app.initialize();
      </script>
    </body>
</html>
